# 多行转单列
``` bash
# 场景一
------------------------------------
|日期       |销售金额
------------------------------------
|2015/1/1   |1234
|2015/1/2   |1234
|2015/1/3   |1234
|...        |...
|2015/2/1   |1234
|2015/2/2   |1234
|2015/2/3   |1234
|...        |...
|2015/3/1   |1234
|2015/3/2   |1234
|2015/3/3   |1234
|...        |...
------------------------------------
# 按月份汇总
------------------------------------
|月份   |一月   |二月    |三月    |...
|销售额 |3333   |3333   |3333   |...
------------------------------------

# 场景二
---------------------------
|姓名   |学科   |成绩
---------------------------
|张三   |数学   |78
|张三   |英语   |85
|张三   |语文   |90
|李四   |数学   |90
|李四   |英语   |75
|李四   |语文   |80
---------------------------
# 行转列，不汇总
---------------------------
|姓名   |数学   |英语   |语文
---------------------------
|张三   |78   |85   |90
|李四   |90   |75   |80
|王五   |75   |69   |95
|赵六   |89   |70   |79
---------------------------

# 场景三：用技巧一中的两张表生成新表
SELECT a.user_name, kills FROM user1 a
JOIN user_kills b ON a.id = b.user_id;
---------------------------
|姓名     |打怪数量
---------------------------
|猪八戒   |10
|猪八戒   |2
|猪八戒   |12
|沙僧     |3
|沙僧     |5
|沙僧     |1
|孙悟空   |20
|孙悟空   |10
|孙悟空   |17
---------------------------

# 转换成按名字汇总
SELECT a.user_name, SUM(kills) FROM user1 a
JOIN user_kills b ON a.id = b.user_id
GROUP BY a.user_name;
---------------------------
|姓名     |打怪数量
---------------------------
|猪八戒   |10
|沙僧     |3
|孙悟空   |20
---------------------------

# 行显转换列显：使用自链接的方式实现行转列
SELECT * FROM 
(
  SELECT SUM(kills) AS 沙僧 FROM user1 a
  JOIN user_kills b ON  a.id = b.user_id
  AND user_name = '沙僧'
) a CROSS JOIN (
  SELECT SUM(kills) AS 猪八戒 FROM user1 a
  JOIN user_kills b ON  a.id = b.user_id
  AND user_name = '猪八戒'
) a CROSS JOIN (
  SELECT SUM(kills) AS 孙悟空 FROM user1 a
  JOIN user_kills b ON  a.id = b.user_id
  AND user_name = '孙悟空'
) c;
---------------------------
|孙悟空   |猪八戒   |沙僧
|47      |24      |9
---------------------------
# 方式优化：使用CASE方法实现行转列
SELECT
  SUM(CASE WHEN user_name = '孙悟空' THEN kills END) AS 孙悟空,
  SUM(CASE WHEN user_name = '猪八戒' THEN kills END) AS 猪八戒,
  SUM(CASE WHEN user_name = '沙僧' THEN kills END) AS 沙僧
FROM 
  user1 a JOIN user_kills b ON a.id = b.user_id;
```

# 单列转多行
``` bash
# 场景一
-----------------------------------------
|operator_id   |op_userid    |permission
-----------------------------------------
|1    |10001  |501,104,105,403
|70   |10002  |101,202,104
|72   |10003  |107,108
|73   |10004  |904,905
|74   |10005  |101
-----------------------------------------
# 属性拆分
-----------------------------------------
|operator_id   |op_userid    |permission
-----------------------------------------
|1    |10001  |501
|1    |10001  |104
|1    |10001  |105
|1    |10001  |403
|70   |10002  |101
|70   |10002  |202
|70   |10002  |104
|...  |...    |...
-----------------------------------------

# 场景二
-----------------------------------------
|user_name   |mobile
-----------------------------------------
|唐僧    |18989192288,18989192233,...
|猪八戒   |18989192222,...
|孙悟空   |18989192277,...
|沙僧    |18989192999,...
-----------------------------------------
# 列转行
-----------------------------------------
|user_name   |mobile
-----------------------------------------
|唐僧    |18989192288
|唐僧    |18989192233
|孙悟空   |18989192277
|孙悟空   |18989192200
|...    |...
-----------------------------------------

# 利用序列表实现单列转多行
# tb_sequence
--------
|id   
--------
|1   
|2   
|3   
|4   
|5   
|6   
|7   
|8
--------  
SELECT
  user_name,
  REPLACE(
    SUBSTRING(
      SUBSTRING_INDEX(mobile,',',a.id),
      CHAR_LENGTH(SUBSTRING_INDEX(mobile,',',a.id-1))+1
    ),',',''
  ) AS mobile
FROM tb_sequence a 
CROSS JOIN (
  SELECT
    user_name,
    CONCAT(mobile,',') AS mobile,
    LENGTH(mobile)-LENGTH(REPLACE(mobile,',',''))+1 size 
  FROM user1 b
) b ON a.id <= b.size;

# 分解
SELECT
  user_name,
  CONCAT(mobile,',') AS mobile,
  LENGTH(mobile)-LENGTH(REPLACE(mobile,',',''))+1 size 
FROM user1 b
-----------------------------------------
|user_name   |mobile              |size
-----------------------------------------
|唐僧    |18989192288,18989192233,... |3
|猪八戒   |18989192222,...  |3
|孙悟空   |18989192277,...  |4
|沙僧    |18989192999,... |2
-----------------------------------------
SELECT *
FROM tb_sequence a 
CROSS JOIN (
  SELECT
    user_name,
    CONCAT(mobile,',') AS mobile,
    LENGTH(mobile)-LENGTH(REPLACE(mobile,',',''))+1 size 
  FROM user1 b
) b ON a.id <= b.size;
-----------------------------------------
|user_name   |mobile              |size
-----------------------------------------
|唐僧    |18989192288,18989192233,... |3
|唐僧    |18989192288,18989192233,... |3
|唐僧    |18989192288,18989192233,... |3
|猪八戒   |18989192222,...  |3
|猪八戒   |18989192222,...  |3
|猪八戒   |18989192222,...  |3
|孙悟空   |18989192277,...  |4
|孙悟空   |18989192277,...  |4
|孙悟空   |18989192277,...  |4
|孙悟空   |18989192277,...  |4
|沙僧    |18989192999,... |2
|沙僧    |18989192999,... |2
-----------------------------------------

# 使用UNION的方式实现多列转多行
-----------------------------------------
|userame  |arms |clothing |shoe
-----------------------------------------
|唐僧     |杖   |袈裟   |僧鞋
|猪八戒   |耙   |僧衣   |僧鞋
|孙悟空   |棍   |金甲   |云履
|沙僧     |杖   |僧衣   |僧鞋
-----------------------------------------
-----------------------------------------
|userame  |equipment |equ_name
-----------------------------------------
|唐僧     |arms       |杖
|唐僧     |clothing   |袈裟
|唐僧     |shoe       |僧鞋
|孙悟空   |arms       |棍
|孙悟空   |clothing   |金甲
|孙悟空   |shoe       |云履
-----------------------------------------

```

# 如何进行行列转换
``` bash

```

# 如何生成唯一序列号
``` bash

```

# 如何删除重复数据 
``` bash

```